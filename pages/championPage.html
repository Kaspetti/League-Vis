<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>INF358</title>
        <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
        <link rel="stylesheet" href="/assets/championPageStyle.css">
    </head>

    <body>
        <div style="text-align: center;">
            <input type="text" id="champSearch" style="padding: 6px; margin: 5px;">
            <br>
            <button type="submit" onclick="searchChampion()">Search</button>
            <div id="main" style="width: 100vw; height: 90vh; margin: auto;"></div>
        </div>

        <script type="text/javascript">
            var chart = echarts.init(document.getElementById("main"));

            var options = {
                title: {
                    left: "center",
                    text: {{ .Title }},
                    subtext: "{{ .TotalPlayed }} analyzed games",
                    textStyle: {
                        fontSize: "35",
                        color: "white",
                    },
                    subtextStyle: {
                        color: "white",
                    },
                },
                tooltip: {
                    formatter: function (info) {
                        var value = info.value;
                        var winrate = value[1];
                        winrate = winrate.toFixed(2);

                        return [
                            '<div class="tooltip-title">' + echarts.format.encodeHTML(info.name) + '</div>',
                            'Matches Analyzed: ' + value[0] + '<br>',
                            'Winrate: ' + winrate + '<br>',
                        ].join('');
                    },
                },
                visualMap: {
                    orient: "horizontal",
                    left: 'center',
                    min: 40,
                    max: 60,
                    text: ["> 60", "< 40"],
                    inRange: {
                        color: [{{ .Red }}, {{ .White }}, {{ .Green }}],
                    },
                    textStyle: {
                        color: "white",
                    },
                },
                controller: false,
                series: [{
                    type: "treemap",
                    itemStyle: {
                        borderColor: "black",
                        borderWidth: 1,
                    },
                    breadcrumb: {
                        show: false,
                    },
                    label: {
                        normal: {
                            show: true,
                            textStyle: {
                                color: 'black',
                            },
                        },
                    },
                    data: {{ .Data }},
                }],
            };

            chart.setOption(options);

            window.onresize = function() {
                chart.resize();
            };
        </script>
        <script src="/assets/championPage.js"></script>
    </body>
</html>
